import{c as D,a as l,o as R,j as e,m as a,l as k,U as H}from"./index-BHyKrKGo.js";import{U as S}from"./users-CFKhssQv.js";import{P as _}from"./plus-g_po5mX3.js";import{S as L}from"./shield-BfnzN0pM.js";import{C as O}from"./crown-BMNJy1_r.js";const $=D("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),B=l.createContext(),F=()=>{const d=l.useContext(B);if(!d)throw new Error("useTeam must be used within TeamProvider");return d},X=()=>{const{user:d}=R(),{teams:u,currentTeam:s,setCurrentTeam:z,members:p,loading:G,createTeam:q,inviteMember:T}=F(),[A,i]=l.useState(!1),[I,r]=l.useState(!1),[x,h]=l.useState(""),[b,f]=l.useState(""),[m,g]=l.useState(""),[j,M]=l.useState("member"),[n,c]=l.useState(!1),E=async t=>{if(t.preventDefault(),!x.trim())return;c(!0),await q(x,b)&&(h(""),f(""),i(!1)),c(!1)},P=async t=>{if(t.preventDefault(),!m.trim()||!s)return;c(!0),await T(s.id,m,j)&&(g(""),r(!1)),c(!1)},U=t=>{switch(t){case"admin":return e.jsx(O,{size:14,className:"text-yellow-400"});case"moderator":return e.jsx(L,{size:14,className:"text-blue-400"});default:return e.jsx(H,{size:14,className:"text-gray-400"})}};return e.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 bg-animated",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(S,{className:"text-purple-400"}),"Espace Équipe"]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Collaborez avec votre équipe et partagez vos progrès"})]}),e.jsxs(a.button,{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(_,{size:18}),"Créer une équipe"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Mes Équipes"}),e.jsx("div",{className:"space-y-2",children:u.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"Aucune équipe"}):u.map(t=>e.jsxs(a.button,{onClick:()=>z(t),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${(s==null?void 0:s.id)===t.id?"bg-purple-500/20 border border-purple-500/30":"hover:bg-white/5"}`,whileHover:{x:4},children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white font-bold",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-left flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.role})]})]},t.id))})]})}),e.jsx("div",{className:"lg:col-span-3",children:s?e.jsxs("div",{className:"glass-card rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white text-2xl font-bold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s.name}),e.jsx("p",{className:"text-gray-400",children:s.description||"Aucune description"})]})]}),s.role==="admin"&&e.jsxs(a.button,{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/15 text-white rounded-lg font-medium transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx($,{size:18}),"Inviter"]})]}),e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Membres (",p.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(t=>{var o,w,v,y,N,C;return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:((w=(o=t.profiles)==null?void 0:o.full_name)==null?void 0:w.charAt(0))||((y=(v=t.profiles)==null?void 0:v.email)==null?void 0:y.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:((N=t.profiles)==null?void 0:N.full_name)||((C=t.profiles)==null?void 0:C.email)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[U(t.role),e.jsx("span",{className:"capitalize",children:t.role})]})]})]},t.id)})})]}):e.jsxs("div",{className:"glass-card rounded-2xl p-12 text-center",children:[e.jsx(S,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Sélectionnez une équipe"}),e.jsx("p",{className:"text-gray-400",children:"Ou créez-en une nouvelle pour commencer à collaborer"})]})})]})]}),e.jsx(k,{children:A&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>i(!1),children:e.jsxs(a.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-card rounded-2xl p-6 w-full max-w-md",onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Créer une équipe"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Nom de l'équipe"}),e.jsx("input",{type:"text",value:x,onChange:t=>h(t.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500",placeholder:"Mon équipe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Description (optionnel)"}),e.jsx("textarea",{value:b,onChange:t=>f(t.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 resize-none",placeholder:"Description de l'équipe...",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-3 bg-white/10 text-white rounded-xl font-medium hover:bg-white/15 transition-all",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-medium disabled:opacity-50",children:n?"Création...":"Créer"})]})]})]})})}),e.jsx(k,{children:I&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>r(!1),children:e.jsxs(a.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-card rounded-2xl p-6 w-full max-w-md",onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Inviter un membre"}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:m,onChange:t=>g(t.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500",placeholder:"email@exemple.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Rôle"}),e.jsxs("select",{value:j,onChange:t=>M(t.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"member",children:"Membre"}),e.jsx("option",{value:"moderator",children:"Modérateur"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-4 py-3 bg-white/10 text-white rounded-xl font-medium hover:bg-white/15 transition-all",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-medium disabled:opacity-50",children:n?"Envoi...":"Inviter"})]})]})]})})})]})};export{X as default};
